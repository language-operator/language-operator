#!/usr/bin/env ruby
# frozen_string_literal: true

# Add lib directories to load path
$LOAD_PATH.unshift('/app/lib')           # Backend library
$LOAD_PATH.unshift(File.expand_path('../lib', __dir__))  # Headless lib

require 'yaml'
require 'langop_client'
require 'headless_agent'

# Load MCP configuration
config_path = ENV.fetch('CONFIG_PATH', '/app/agent/config/config.yaml')
config = Langop::Client::Config.load_with_fallback(config_path)

# Load goals configuration
goals_path = ENV.fetch('GOALS_PATH', '/app/agent/config/goals.yaml')
goals = YAML.load_file(goals_path)

# Create and run agent
agent = HeadlessAgent.new(config, goals)
agent.run
